
---
title: "内存分配原理"
date: "2023-04-14"
author: "NeysaBan"
category: "操作系统"
tags:
- 操作系统
readTime: "6分钟"
---

![](https://20231118-1258904223.cos.ap-shanghai.myqcloud.com/image/202602011753256.png)

内存分配原理见图

这里其实一直有一个疑问,就是为什么要分分级分配?

我认为原因如下:

使用free()释放内存时,分两种情况

- 在堆顶：直接释放
- 不在堆顶：不取消已经建立好的内存映射、不释放内存，仅仅是标记这部分内存为空闲（下次malloc()可以直接用这块内存

因此,假如都直接用一级分配器分配内存的话,很明显,堆中会存在很多小的内存碎片

- ✨ Ref
    [内存分配器_执行长老的博客-CSDN博客](https://blog.csdn.net/CQRuler/article/details/118029626)
    [内存分配器的设计与实现_执行长老_Ruler的博客-CSDN博客](https://blog.csdn.net/qq_30601187/article/details/47662063)

